```mermaid
sequenceDiagram
    participant H as 头结点
    participant P as p节点
    participant Q as q节点(待删除)
    participant N as 后继节点

    Note over H,N: 初始状态
    H->>P: p是第i-1个节点
    P->>Q: p->next指向待删除节点
    Q->>N: q->next指向后继节点
    
    Note over P,Q: 步骤1: 检查p->next
    rect rgb(255, 182, 193)
    Note over P: if(p->next == NULL)
    Note over P: 说明没有可删除的节点
    end
    
    Note over P,Q: 步骤2: 保存待删除节点
    rect rgb(152, 251, 152)
    P->>Q: q = p->next
    Note over Q: e = q->data
    end
    
    Note over P,N: 步骤3: 重新连接
    rect rgb(135, 206, 250)
    P->>N: p->next = q->next
    end
    
    Note over Q: 步骤4: 释放空间
    rect rgb(255, 218, 185)
    Note over Q: free(q)
```


```mermaid
sequenceDiagram
    participant L as 链表头指针L
    participant S as 新节点s
    participant O as 原始节点

    Note over L,O: 初始状态
    L->>O: L指向原始链表
    
    Note over L,S: 步骤1: 创建新节点
    rect rgb(152, 251, 152)
    Note over S: malloc分配空间
    Note over S: s->data = e
    end
    
    Note over S,O: 步骤2: 新节点指向原链表
    S->>O: s->next = L
    
    Note over L,S: 步骤3: 头指针指向新节点
    L->>S: L = s
```

```mermaid
graph LR
    subgraph "情况1: i < 1"
        A1[位置不合法] --> B1[返回false]
    end

    subgraph "情况2: i = 1（插入位置为表头）"
        A2[新节点] --> B2[原来的头结点]
        B2 --> C2[其他节点]
        style A2 fill:#98FB98
        style B2 fill:#87CEFA
        style C2 fill:#87CEFA
    end

    subgraph "情况3: i > 1（插入位置在中间）"
        A3[头结点] --> B3[前驱节点] 
        B3 --> C3[后继节点]
        D3[新节点]
        style A3 fill:#87CEFA
        style B3 fill:#87CEFA
        style C3 fill:#87CEFA
        style D3 fill:#98FB98
    end
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTg0ODk3ODQxMSwtMjA4ODc0NjYxMl19
-->